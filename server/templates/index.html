<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <title>WifiJeep</title>
    </head>
    <script type="text/javascript">
        var lastkeypress = 0;
        var currentkeypress;
        function getUltraLiveTime(){ // this needs fixed
            var d = new Date();
            var t = d.getTime();
            return t;
        }
        function doWork(buttonid, event){
            $.post("/postrequest", {"byte":buttonid});
            if (event!=="undefined") {
                event.preventDefault();
            }
        }
        window.addEventListener('keydown', function(event){
            currentkeypress = getUltraLiveTime();
            //console.log(getUltraLiveTime());
            if (currentkeypress>=lastkeypress) { // check if time is divisible by 1000
                console.log(toString(event.keyCode));
                lastkeypress = currentkeypress + 500; // for now 500 seems good, may change later
                if (event.keyCode == 38) { // forward
                    doWork("forward", event);
                } else if (event.keyCode == 40) { // backward
                    doWork("backward", event);
                } else { // coast
                    doWork("coast", event);
                }

                if (event.keyCode == 37) { // left
                    doWork("left", event);
                } else if (event.keyCode == 39) { // right
                    doWork("right", event);
                } else { // straight
                    doWork("straight", event);
                }
            }
        });
        console.log("Script Loaded.");
    </script>
    <h1>Press to activate car</h1>
    <button id="forward" onclick="doWork(this.id)">Forward</button>
    <button id="backward" onclick="doWork(this.id)">Back</button>
    <button id="left" onclick="doWork(this.id)">Left</button>
    <button id="right" onclick="doWork(this.id)">Right</button>
    <button id="straight" onclick="doWork(this.id)">Straight</button>
    <button id="coast" onclick="doWork(this.id)">Coast</button>
</html>